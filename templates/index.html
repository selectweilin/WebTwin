<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>网站提取器 - 像素级完美克隆</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      .loading {
        display: none;
      }
      .loading.active {
        display: block;
      }
      .progress-bar {
        transition: width 0.3s ease-in-out;
      }
      .feature-badge {
        background-color: #ebf8ff;
        color: #3182ce;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.75rem;
        margin-left: 6px;
        vertical-align: middle;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
      <div class="max-w-2xl mx-auto">
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-4xl font-bold text-gray-800">网站提取器</h1>
        </div>
        <p class="text-center text-gray-600 mb-8">
          创建任何网站的像素级完美克隆
        </p>

        <div class="bg-white rounded-lg shadow-lg p-6">
          <form id="extractForm" class="space-y-4">
            <div>
              <label for="url" class="block text-sm font-medium text-gray-700"
                >网站URL</label
              >
              <input
                type="url"
                id="url"
                name="url"
                required
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"
                placeholder="https://example.com"
              />
              <p class="mt-1 text-sm text-gray-500">
                输入您要克隆的网站的完整URL
              </p>
            </div>

            <div class="flex items-center">
              <input
                type="checkbox"
                id="use_selenium"
                name="use_selenium"
                value="true"
                class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
              />
              <label
                for="use_selenium"
                class="ml-2 block text-sm text-gray-900"
              >
                使用高级渲染 (Selenium)
                <span class="feature-badge">推荐</span>
              </label>
            </div>
            <p class="text-xs text-gray-500 -mt-2 ml-6">
              渲染JavaScript并滚动页面以捕获所有内容。推荐用于具有动态内容的现代网站。
            </p>

            <button
              type="submit"
              class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
            >
              提取网站
            </button>
          </form>

          <div id="loading" class="loading mt-6">
            <div class="space-y-4">
              <div class="flex items-center justify-center">
                <div
                  class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"
                ></div>
              </div>
              <div class="text-center">
                <p class="text-gray-600 mb-2">正在提取网站资源...</p>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                  <div
                    id="progressBar"
                    class="progress-bar bg-blue-600 h-2.5 rounded-full"
                    style="width: 0%"
                  ></div>
                </div>
                <p id="progressText" class="text-sm text-gray-500 mt-2">
                  初始化中...
                </p>
              </div>
            </div>
          </div>

          <div
            id="error"
            class="hidden mt-4 p-4 bg-red-100 text-red-700 rounded-md"
          ></div>

          <div id="success" class="hidden">
            <div
              class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded"
            >
              <div class="flex items-center">
                <svg
                  class="w-6 h-6 mr-2"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 13l4 4L19 7"
                  ></path>
                </svg>
                <p class="font-bold text-lg">网站提取成功！</p>
              </div>
              <div class="success-message mt-2">
                <p>您的下载应该会自动开始。如果没有，请点击下面的按钮：</p>
                <div class="mt-3 flex justify-center">
                  <button
                    id="direct-download"
                    class="bg-blue-600 hover:bg-blue-700 text-white py-3 px-6 rounded-md font-bold flex items-center text-lg"
                  >
                    <svg
                      class="w-6 h-6 mr-2"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                      ></path>
                    </svg>
                    点击这里下载
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4">增强的提取功能</h2>
          <ul class="space-y-2 text-gray-600">
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              完整的HTML DOM结构
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              所有CSS样式表（外部和内联）
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              globals.css和样式文件
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              JavaScript文件和功能
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              Next.js配置和文件
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              图像配置和资源
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              元数据提取
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              移动端专用组件
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              SVG图形（链接和内联）
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              视频文件和播放器组件
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              音频文件和播放器组件
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              字体文件和字体系列检测
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              GIF动画和动态内容
              <span class="feature-badge">新功能</span>
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              网站和组件截图
              <span class="feature-badge bg-indigo-100 text-indigo-700"
                >PREMIUM</span
              >
            </li>
            <li class="flex items-center">
              <svg
                class="w-5 h-5 text-green-500 mr-2"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M5 13l4 4L19 7"
                ></path>
              </svg>
              JavaScript渲染内容捕获
              <span class="feature-badge bg-indigo-100 text-indigo-700"
                >PREMIUM</span
              >
            </li>
          </ul>
        </div>

        <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4">提取的UI组件</h2>
          <p class="text-gray-600 mb-4">该工具自动识别和提取关键的UI组件以便重复使用：</p>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-4">
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">导航</h3>
                  </div>
                  <p class="text-sm text-gray-600">头部、菜单和导航栏，具有响应式设计</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">英雄区块</h3>
                  </div>
                  <p class="text-sm text-gray-600">吸引眼球的英雄横幅，包含图像、文本叠加和行动召唤按钮</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">商店页面</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">完整的商店布局，包括产品列表、筛选器和购物功能</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">移动端菜单</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">移动端专用导航组件和响应式设计元素</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">产品网格</h3>
                  </div>
                  <p class="text-sm text-gray-600">产品列表和卡片网格，包含图像、价格和描述</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">购物车</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">购物车组件，包含商品列表、数量控制和结账按钮</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">轮播图和滑块</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">图像滑块、产品轮播和推荐轮播器，带有控制功能</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">视频播放器</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">自定义视频播放器组件，带有控制功能和响应式设计</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">音频播放器</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">音频播放组件，带有控制功能和播放列表功能</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">选项卡组件</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">带有内容面板和交互式导航的选项卡界面</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">社交媒体</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">社交媒体链接、分享按钮和嵌入式社交信息流</p>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                      </svg>
                      <h3 class="font-medium">模态框和弹窗</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <p class="text-sm text-gray-600">模态框、弹出对话框和带动画的覆盖组件</p>
              </div>
          </div>
          
          <div class="mt-4 p-4 bg-blue-50 text-blue-700 rounded-md">
              <p class="font-medium">ZIP文件中包含的组件</p>
              <p class="text-sm mt-1">所有提取的UI组件都包含在下载的ZIP文件中，便于访问和重复使用。</p>
          </div>
      </div>
      
      <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4">框架支持</h2>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Next.js</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>next.config.js 提取</li>
                      <li>_app.js 和 _document.js</li>
                      <li>静态和动态路由</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Tailwind CSS</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>tailwind.config.js 提取</li>
                      <li>自定义主题设置</li>
                      <li>插件配置</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">React</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>组件结构检测</li>
                      <li>React特定属性</li>
                      <li>状态管理模式</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Vue.js</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>Vue组件检测</li>
                      <li>vue.config.js 提取</li>
                      <li>Vue指令解析</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Angular</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>Angular组件结构</li>
                      <li>angular.json 配置</li>
                      <li>模块检测</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Bootstrap</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>Bootstrap组件类</li>
                      <li>网格系统提取</li>
                      <li>自定义Bootstrap主题</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">SCSS/SASS</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>变量定义</li>
                      <li>混合器提取</li>
                      <li>嵌套样式</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Svelte</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>Svelte组件格式</li>
                      <li>响应式声明</li>
                      <li>模板结构</li>
                  </ul>
              </div>
              
              <div class="border border-gray-200 rounded-lg p-4 bg-gray-50">
                  <div class="flex items-center mb-2">
                      <svg class="w-5 h-5 text-blue-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                      </svg>
                      <h3 class="font-medium">Material UI</h3>
                      <span class="feature-badge">新功能</span>
                  </div>
                  <ul class="text-sm text-gray-600 list-disc pl-5 mt-2 space-y-1">
                      <li>Material组件类</li>
                      <li>主题配置</li>
                      <li>Material图标</li>
                  </ul>
              </div>
          </div>
      </div>
      
      <div class="mt-8 bg-white rounded-lg shadow-lg p-6">
          <h2 class="text-xl font-semibold mb-4">如何使用克隆版本</h2>
          <ol class="list-decimal pl-5 space-y-2 text-gray-600">
              <li>解压下载的ZIP文件</li>
              <li>在浏览器中打开 <code class="bg-gray-100 px-1 py-0.5 rounded">index.html</code> 文件以查看静态克隆版本</li>
              <li>在 <code class="bg-gray-100 px-1 py-0.5 rounded">components</code> 文件夹中查找提取的组件</li>
              <li>在 <code class="bg-gray-100 px-1 py-0.5 rounded">metadata.json</code> 中查看元数据</li>
              <li>检查 <code class="bg-gray-100 px-1 py-0.5 rounded">css/globals.css</code> 文件中的全局样式</li>
              <li>在Cursor中编辑HTML、CSS和JavaScript文件以自定义设计</li>
              <li>使用包含的 <code class="bg-gray-100 px-1 py-0.5 rounded">manifest.json</code> 文件来定位特定资源</li>
          </ol>
          <div class="mt-4 p-4 bg-blue-50 text-blue-700 rounded-md">
              <p class="font-medium">专业提示：</p>
              <p class="text-sm mt-1">为了获得最准确的结果，请尝试克隆网站的桌面版本。一些网站可能有反爬虫措施，可能会影响结果。</p>
          </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const form = document.getElementById("extractForm");
        const loading = document.getElementById("loading");
        const error = document.getElementById("error");
        const success = document.getElementById("success");
        const progressBar = document.getElementById("progressBar");
        const progressText = document.getElementById("progressText");

        // Progress simulation values
        let progressInterval;
        let currentProgress = 0;

        form.addEventListener("submit", function (e) {
          e.preventDefault();

          // Get form data
          const url = document.getElementById("url").value.trim();
          const useSelenium = document.getElementById("use_selenium").checked;

          if (!url) {
            showError("请输入有效的URL");
            return;
          }

          // Reset UI state
          resetState();

          // Show loading indicator
          loading.classList.add("active");

          // Start progress simulation
          startProgressSimulation();

          // Create form data
          const formData = new FormData();
          formData.append("url", url);
          formData.append("use_selenium", useSelenium ? "true" : "false");

          // If using Selenium, show info that it might take longer
          if (useSelenium) {
            progressText.textContent =
              "初始化高级渲染浏览器（这可能需要一分钟）...";
          }

          // Send extraction request
          fetch("/extract", {
            method: "POST",
            body: formData,
          })
            .then((response) => {
              // Clear progress simulation
              clearInterval(progressInterval);

              if (response.ok) {
                // Set progress to 100%
                updateProgress(100, "下载开始...");

                // Show success message after a short delay
                setTimeout(() => {
                  loading.classList.remove("active");
                  success.classList.remove("hidden");
                }, 1000);

                // Try to get the filename from the Content-Disposition header
                const contentDisposition = response.headers.get(
                  "Content-Disposition"
                );
                let filename = "website_clone.zip";

                if (contentDisposition) {
                  const filenameMatch =
                    contentDisposition.match(/filename="?([^"]+)"?/);
                  if (filenameMatch && filenameMatch[1]) {
                    filename = filenameMatch[1];
                  }
                }

                // Trigger download
                return response
                  .blob()
                  .then((blob) => {
                    if (blob.size < 1000) {
                      // If the blob is too small, it might be an error response disguised as a 200
                      console.error(
                        "Downloaded blob is too small, likely an error response"
                      );
                      throw new Error(
                        "服务器返回了空的或无效的文件。请重试。"
                      );
                    }

                    // Create a download link
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement("a");
                    a.style.display = "none";
                    a.href = url;
                    a.download = filename;
                    document.body.appendChild(a);

                    // Show success message immediately with link
                    loading.classList.remove("active");
                    success.classList.remove("hidden");

                    // Add event listener to the direct download button
                    const directDownloadBtn =
                      document.getElementById("direct-download");
                    if (directDownloadBtn) {
                      directDownloadBtn.onclick = function () {
                        // Create a new anchor element for this click to ensure it works every time
                        const downloadLink = document.createElement("a");
                        downloadLink.href = url;
                        downloadLink.download = filename;
                        document.body.appendChild(downloadLink);
                        downloadLink.click();
                        document.body.removeChild(downloadLink);
                        console.log(
                          "Manual download initiated via direct download button"
                        );
                      };
                    }

                    // Display helpful message with alternate download link as a fallback
                    const successMessage =
                      document.querySelector(".success-message");
                    if (successMessage) {
                      // Add the fallback instructions after the main button
                      const fallbackDiv = document.createElement("div");
                      fallbackDiv.className =
                        "mt-4 p-3 bg-blue-50 rounded-md border border-blue-200 text-sm";
                      fallbackDiv.innerHTML = `
                                        <p class="font-medium text-blue-800">如果按钮不起作用：</p>
                                        <a href="${url}" download="${filename}" class="inline-block mt-2 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md flex items-center text-sm">
                                            <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                                            </svg>
                                            备用下载链接
                                        </a>
                                        <p class="mt-2 text-xs text-blue-600">此链接将在30分钟内保持可用。</p>
                                    `;
                      // Append after the main button's parent div
                      const mainButtonParent = document.querySelector(
                        ".success-message .mt-3"
                      );
                      if (mainButtonParent && mainButtonParent.nextSibling) {
                        mainButtonParent.parentNode.insertBefore(
                          fallbackDiv,
                          mainButtonParent.nextSibling
                        );
                      } else if (mainButtonParent) {
                        mainButtonParent.parentNode.appendChild(fallbackDiv);
                      }
                    }

                    // Try to download using the anchor click method
                    try {
                      setTimeout(() => {
                        a.click();
                        console.log(
                          "Download initiated via click() after showing UI"
                        );
                      }, 500); // Slight delay to ensure UI is updated first

                      // Clean up the hidden anchor but keep the blob URL valid for manual download
                      setTimeout(() => {
                        document.body.removeChild(a);
                        // Keep the URL valid for 30 minutes before releasing
                        setTimeout(() => {
                          window.URL.revokeObjectURL(url);
                          console.log("Blob URL revoked after timeout");
                          // Update the success message to indicate the link is no longer available
                          if (successMessage) {
                            const downloadLinks =
                              successMessage.querySelectorAll("a");
                            downloadLinks.forEach((link) => {
                              link.classList.add(
                                "opacity-50",
                                "cursor-not-allowed"
                              );
                              link.classList.remove("hover:bg-blue-700");
                              link.onclick = (e) => {
                                e.preventDefault();
                                alert(
                                  "下载链接已过期。请重新提取网站。"
                                );
                              };
                            });

                            // Disable the direct download button as well
                            if (directDownloadBtn) {
                              directDownloadBtn.classList.add(
                                "opacity-50",
                                "cursor-not-allowed",
                                "bg-gray-500"
                              );
                              directDownloadBtn.classList.remove(
                                "hover:bg-blue-700",
                                "bg-blue-600"
                              );
                              directDownloadBtn.onclick = (e) => {
                                e.preventDefault();
                                alert(
                                  "下载链接已过期。请重新提取网站。"
                                );
                              };
                            }

                            const expireMessages =
                              successMessage.querySelectorAll(
                                "p.text-xs, p.text-sm"
                              );
                            expireMessages.forEach((message) => {
                              if (
                                message.textContent.includes(
                                  "30分钟内保持可用"
                                )
                              ) {
                                message.textContent =
                                  "下载链接已过期。请重新提取网站。";
                                message.classList.remove("text-blue-600");
                                message.classList.add("text-red-600");
                              }
                            });
                          }
                        }, 1800000); // 30 minutes (matching the server-side cleanup)
                      }, 1000);
                    } catch (e) {
                      console.error("Error with click method:", e);

                      // Show user-friendly error and make manual download link more prominent
                      if (successMessage) {
                        const downloadInfo =
                          successMessage.querySelector(".p-3");
                        if (downloadInfo) {
                          downloadInfo.classList.remove(
                            "bg-blue-50",
                            "border-blue-200"
                          );
                          downloadInfo.classList.add(
                            "bg-red-50",
                            "border-red-200"
                          );

                          const titleElement =
                            downloadInfo.querySelector("p.font-medium");
                          if (titleElement) {
                            titleElement.textContent =
                              "自动下载失败：";
                            titleElement.classList.remove("text-blue-800");
                            titleElement.classList.add("text-red-800");
                          }
                        }
                      }

                      // Fallback: Open in new tab/window if browser supports it
                      try {
                        window.open(url, "_blank");
                      } catch (tabError) {
                        console.error("Error opening in new tab:", tabError);
                        // Last resort: Alert the user
                        alert(
                          "无法自动开始下载。请使用页面上的下载按钮"
                        );
                      }
                    }
                  })
                  .catch((blobError) => {
                    console.error("Error processing blob:", blobError);
                    loading.classList.remove("active");
                    showError("准备下载时出错：" + blobError.message);
                  });
              } else {
                // Show error for non-200 responses
                return response.text().then((text) => {
                  console.error("Server response error:", text);
                  try {
                    // Try to parse as JSON first
                    const data = JSON.parse(text);
                    throw new Error(data.error || "网站提取失败");
                  } catch (jsonError) {
                    // If not JSON, return the raw text or a generic error
                    throw new Error(text || "网站提取失败");
                  }
                });
              }
            })
            .catch((err) => {
              clearInterval(progressInterval);
              loading.classList.remove("active");
              console.error("Fetch error:", err);
              showError(
                err.message || "提取网站时发生错误"
              );
            });
        });

        function resetState() {
          loading.classList.remove("active");
          error.classList.add("hidden");
          success.classList.add("hidden");
          error.textContent = "";
          currentProgress = 0;
          updateProgress(0, "初始化中...");
        }

        function showError(message) {
          error.textContent = message;
          error.classList.remove("hidden");
        }

        function startProgressSimulation() {
          // Clear any existing interval
          if (progressInterval) {
            clearInterval(progressInterval);
          }

          const useSelenium = document.getElementById("use_selenium").checked;
          const maxProgress = useSelenium ? 90 : 95; // Leave room for completion

          progressInterval = setInterval(() => {
            if (currentProgress < maxProgress) {
              // Slower progress at the beginning
              if (currentProgress < 30) {
                currentProgress += 0.5;
                updateProgress(currentProgress, "获取网站内容...");
              }
              // Increase speed a bit
              else if (currentProgress < 60) {
                currentProgress += 0.3;
                updateProgress(
                  currentProgress,
                  "提取CSS和JavaScript..."
                );
              }
              // Slower again approaching the end
              else if (currentProgress < maxProgress) {
                currentProgress += 0.1;
                if (useSelenium) {
                  updateProgress(
                    currentProgress,
                    "渲染JavaScript并捕获动态内容..."
                  );
                } else {
                  updateProgress(
                    currentProgress,
                    "下载资源并创建ZIP文件..."
                  );
                }
              }
            }
          }, 100);
        }

        function updateProgress(value, text) {
          progressBar.style.width = `${value}%`;
          progressText.textContent = text;
        }
      });
    </script>
  </body>
</html>
